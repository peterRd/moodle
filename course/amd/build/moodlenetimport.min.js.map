{"version":3,"sources":["../src/moodlenetimport.js"],"names":["init","customclass","pendingPromise","Pending","registerListenerEvents","resolve","events","CustomEvents","activate","keyboardActivate","define","document","notification","querySelector","getElementsByClassName","forEach","event","addEventListener","e","target","preventDefault","Repository","stopImportProcess","remove"],"mappings":"+OAwBA,kUACA,OACA,O,kXAQO,GAAMA,CAAAA,CAAI,CAAG,SAACC,CAAD,CAAiB,CACjC,GAAMC,CAAAA,CAAc,CAAG,GAAIC,UAA3B,CAEAC,CAAsB,CAACH,CAAD,CAAtB,CAEAC,CAAc,CAACG,OAAf,EACH,CANM,C,SAcP,GAAMD,CAAAA,CAAsB,CAAG,SAACH,CAAD,CAAiB,CAC5C,GAAMK,CAAAA,CAAM,CAAG,CACX,OADW,CAEXC,UAAaD,MAAb,CAAoBE,QAFT,CAGXD,UAAaD,MAAb,CAAoBG,gBAHT,CAAf,CAKAF,UAAaG,MAAb,CAAoBC,QAApB,CAA8BL,CAA9B,EACA,GAAMM,CAAAA,CAAY,CAAGD,QAAQ,CAACE,aAAT,CAAuB,qBAAvB,EAA8CC,sBAA9C,CAAqEb,CAArE,EAAkF,CAAlF,CAArB,CACAK,CAAM,CAACS,OAAP,CAAe,SAACC,CAAD,CAAW,CACtBJ,CAAY,CAACK,gBAAb,CAA8BD,CAA9B,4CAAqC,WAAME,CAAN,wFAC7BA,CAAC,CAACC,MAAF,EAAYP,CAAY,CAACC,aAAb,CAA2B,GAA3B,CADiB,kBAE7BK,CAAC,CAACE,cAAF,GAF6B,eAGvBC,CAAAA,CAAU,CAACC,iBAAX,EAHuB,QAI7BV,CAAY,CAACW,MAAb,GAJ6B,wCAArC,wDAOH,CARD,CASH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle the moodlenet import\n *\n * @module     core_course/moodlenetimport\n * @package    core_course\n * @copyright  2020 Peter Dias <peter@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Repository from 'core_course/local/activitychooser/repository';\nimport CustomEvents from 'core/custom_interaction_events';\nimport Pending from 'core/pending';\n\n/**\n * Set up the custom js for the import notification.\n *\n * @method init\n * @param {String} customclass Course ID to use later on in fetchModules()\n */\nexport const init = (customclass) => {\n    const pendingPromise = new Pending();\n\n    registerListenerEvents(customclass);\n\n    pendingPromise.resolve();\n};\n\n/**\n * Once a custom moodlenet notification has been displayed, hookup the cancel link\n *\n * @param {String} customclass\n * @method registerListenerEvents\n */\nconst registerListenerEvents = (customclass) => {\n    const events = [\n        'click',\n        CustomEvents.events.activate,\n        CustomEvents.events.keyboardActivate\n    ];\n    CustomEvents.define(document, events);\n    const notification = document.querySelector('#user-notifications').getElementsByClassName(customclass)[0];\n    events.forEach((event) => {\n        notification.addEventListener(event, async(e) => {\n            if (e.target == notification.querySelector('a')) {\n                e.preventDefault();\n                await Repository.stopImportProcess();\n                notification.remove();\n            }\n        });\n    });\n};\n\n"],"file":"moodlenetimport.min.js"}
define(["tool_moodlenet/validator","tool_moodlenet/selectors","core/loadingicon"],function(a,b,c){var d=function(a){var c=document.querySelector(b.region.instancePage);e(c,a)},e=function(d,e){d.addEventListener("click",function(f){if(f.target.matches(b.action.browse)&&(window.location=e),f.target.matches(b.action.submit)){var g=d.querySelector('[data-var="mnet-link"]'),h=d.querySelector(b.region.spinner),i=document.querySelector(b.region.validationArea);h.classList.remove("d-none");var j=c.addIconToContainerWithPromise(h);a.validation(g).then(function(a){j.resolve(),h.classList.add("d-none"),a.result?(g.classList.remove("is-invalid"),g.classList.add("is-valid"),i.innerText=a.message,i.classList.remove("text-error"),i.classList.add("text-success"),setTimeout(function(){window.location=a.domain},1e3)):(g.classList.add("is-invalid"),i.innerText=a.message,i.classList.add("text-error"))})["catch"]()}})};return{init:d}});
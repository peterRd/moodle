define(["jquery","core/templates","core/notification","mod_forum/selectors","mod_forum/inpage_reply"],function(a,b,c,d,e){var f=function(e){e.on("click",d.post.inpage_reply_link,function(e){e.preventDefault();var f=a(e.currentTarget).parents(d.post.forum_core_content),g=a(e.currentTarget).parents(d.post.forum_content),h={postid:a(g).data("post-id"),reply_url:a(e.currentTarget).attr("href"),sesskey:M.cfg.sesskey};f.find(d.post.inpage_reply_content).length?g.find(d.post.inpage_reply_content).toggle():b.render("mod_forum/inpage_reply",h).then(function(a,c){return b.appendNodeContents(f,a,c)}).then(function(){g.find(d.post.inpage_reply_content).toggle()}).fail(c.exception)})};return{init:function(a){f(a),e.init(a)}}});